
#include <dlfcn.h>
#include <stdio.h>

/* WARNING: This file is autogenerated, DO NOT EDIT! */

#define DEFINE_TRAMPOLINE(name)                                            \
    __attribute__((visibility("default"))) void *name##_target = 0;        \
    __attribute__((naked, visibility("default"))) void name(void) {        \
        __asm__ volatile(                                                  \
            "adrp x16, :got:" #name "_target\n"                            \
            "ldr x16, [x16, :got_lo12:" #name "_target]\n"                 \
            "ldr x16, [x16]\n"       /* dereference to get fn ptr */       \
            "br x16\n"                                                     \
        );                                                                 \
    }
//////////////////////
//BEGIN miniui
//////////////////////


// Trampolines:

DEFINE_TRAMPOLINE(_Z11gr_fb_widthv)
DEFINE_TRAMPOLINE(_Z12gr_fb_heightv)
DEFINE_TRAMPOLINE(_Z7gr_exitv)
DEFINE_TRAMPOLINE(_Z7gr_filliiii)
DEFINE_TRAMPOLINE(_Z7gr_flipv)
DEFINE_TRAMPOLINE(_Z7gr_initv)
DEFINE_TRAMPOLINE(_Z7vibratei)
DEFINE_TRAMPOLINE(_Z8gr_colorhhhh)

// Init:

int init_miniui(){
    void* handle = dlopen("/system/lib64/libminuitwrp.so", RTLD_NOW);
    
    if (handle == NULL){
        fprintf(stderr, "Unable to open %s\n", "miniui");
        return -1;
    }


    _Z11gr_fb_widthv_target = (void*) dlsym(handle, "_Z11gr_fb_widthv");
    _Z12gr_fb_heightv_target = (void*) dlsym(handle, "_Z12gr_fb_heightv");
    _Z7gr_exitv_target = (void*) dlsym(handle, "_Z7gr_exitv");
    _Z7gr_filliiii_target = (void*) dlsym(handle, "_Z7gr_filliiii");
    _Z7gr_flipv_target = (void*) dlsym(handle, "_Z7gr_flipv");
    _Z7gr_initv_target = (void*) dlsym(handle, "_Z7gr_initv");
    _Z7vibratei_target = (void*) dlsym(handle, "_Z7vibratei");
    _Z8gr_colorhhhh_target = (void*) dlsym(handle, "_Z8gr_colorhhhh");


    return 0;
}
